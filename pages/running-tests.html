<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <title>libutest - Running the tests</title>
  </head>

  <body>
      <header>
          <h1><a href="http://lubomir.github.io/libutest/">libutest</a></h1>
          <p>simple unit testing for C</p>
      </header>

      <div id="body">
          <h1>Running the tests</h1>

<p>Tests written using <em>libutest</em> are meant to be compiled into a separate executable file. Therefore to be able to run it, there needs to be a <code>main</code> function.</p>
<p>There is a default main provided which you can insert into your program with <code>UT_DEFAULT_MAIN</code>. However, starting from version 0.2, there is no need to manually include <code>UT_DEFAULT_MAIN</code> anymore, as the default <code>main</code> function is included in the library and is used unless your code defines your own entry point function (as weak symbol). If your system does not support <code>main</code> as a weak symbol, you will have to resolve to including it yourself..</p>
<dl>
<dt><code>UT_DEFAULT_MAIN</code></dt>
<dd><p>
This macro expands to definition of a <code>main()</code> function.
</p>

</dd>
</dl>
<p>However, if you are not satisfied with it and want something more complex, you can write your own entrypoint. In that case you will need <code>ut_run_all_tests</code> function to run the tests.</p>
<dl>
<dt><code class="sourceCode c"><span class="dt">int</span> ut_run_all_tests (UtFlags flags)</code></dt>
<dd><p>Run all registered tests from all suites. This function returns number of failed tests. The argument allows you to customize the execution of tests. It is a bitset, which should be accessed only by provided constants.</p>
<ul>
<li><code>UT_QUIET</code> disables all output</li>
<li><code>UT_NO_FORK</code> makes everything run in same thread</li>
<li><code>UT_COLOR_NEVER</code> disables colorizing of the output</li>
<li><code>UT_COLOR_AUTO</code> forces the output to be colorized</li>
<li>use <code>0</code> if you want no flag</li>
</ul>
<p>Not printing can be useful if the tests are run as part of a script or in other automated way. The result can still be determined based on exit value.</p>
<p>Disabling forking is useful when you want to use a tool like <a href="http://www.valgrind.org/">Valgrind</a>, which gives you confusing output when many processes take place. However, disabling the forking will lead to segmentation fault should any single test crash.</p>
<p>The default behaviour about colorizing output is to use colors if printing output to a TTY and skip colors otherwise. It makes no sense to specify both color controls at the same time.</p>
</dd>
</dl>

<ul id="bottom-nav">

    <li id="prev-link"><a href="writing-tests.html">Previous</a></li>

    <li><a href="../index.html">Index</a></li>

    <li id="next-link"><a href="compiling-tests.html">Next</a></li>

</ul>

      </div>

      <footer>
          <ul>
              <li><a href="http://lubomir.github.io/libutest/">libutest</a> 0.4</li>
              <li><a id="github-link" href="https://github.com/lubomir/libutest">
                  Browse on GitHub
              </a></li>
          </ul>
      </footer>
      <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-40665960-2', 'lubomir.github.io');
          ga('send', 'pageview');
      </script>
  </body>
</html>
